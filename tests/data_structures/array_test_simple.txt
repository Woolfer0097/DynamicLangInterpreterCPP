// Test: Array Operations (Basic)
// Tests array creation, access, and modification

test empty_array_creation() is
    var arr := []
    assert arr is []
end

test array_with_single_element() is
    var arr := [42]
    assert arr[1] == 42
    assert arr[1] is int
end

test array_with_multiple_elements() is
    var arr := [1, 2, 3, 4, 5]
    assert arr[1] == 1
    assert arr[2] == 2
    assert arr[3] == 3
    assert arr[4] == 4
    assert arr[5] == 5
end

test array_with_mixed_types() is
    var arr := [1, 2.5, "hello", true, none]
    assert arr[1] == 1
    assert arr[2] == 2.5
    assert arr[3] == "hello"
    assert arr[4] == true
    assert arr[5] is none
end

test array_element_assignment() is
    var arr := [0, 0, 0]
    arr[1] := 10
    arr[2] := 20
    arr[3] := 30
    assert arr[1] == 10
    assert arr[2] == 20
    assert arr[3] == 30
end

test array_element_reassignment() is
    var arr := [1, 2, 3]
    arr[2] := 999
    assert arr[2] == 999
    arr[2] := 42
    assert arr[2] == 42
end

test array_in_expressions() is
    var arr := [10, 20, 30]
    var result := arr[1] + arr[2] + arr[3]
    assert result == 60
end

test nested_array_access() is
    var matrix := [[1, 2], [3, 4], [5, 6]]
    assert matrix[1][1] == 1
    assert matrix[1][2] == 2
    assert matrix[2][1] == 3
    assert matrix[2][2] == 4
    assert matrix[3][1] == 5
    assert matrix[3][2] == 6
end

test array_modification_in_loop() is
    var arr := [0, 0, 0, 0, 0]
    for i in 1..5 loop
        arr[i] := i * 10
    end
    assert arr[1] == 10
    assert arr[2] == 20
    assert arr[3] == 30
    assert arr[4] == 40
    assert arr[5] == 50
end

// Execute all tests
print "Running array tests..."
empty_array_creation()
array_with_single_element()
array_with_multiple_elements()
array_with_mixed_types()
array_element_assignment()
array_element_reassignment()
array_in_expressions()
nested_array_access()
array_modification_in_loop()
print "All array tests passed!"

